import { Title, Subtitle } from "@beyond/docs/components/html";
import { Code } from "@beyond/docs/code";
import { Link, ELink } from "@beyond/docs/components/html";

<Title>Development server</Title>

When BeyondJS runs, it will raise a development server for each distribution configured in each project, allowing you to run them simultaneously. To learn more about configuring distributions, you can read about it in the <Link to="/docs/projects/distributions">Distributions chapter.</Link>

The dev server is an HTTP server whose main role is to interface with the engine to process the module bundles on demand. It takes the request, identifies the requested module, and returns the bundle packaged according to its configuration.

The dev server is used in development to work homogeneously, on-demand (only processing the required bundles), and with HMR in various distributions: (Nodejs, Deno, or the browser).

The image below is the possible working structure of the BeyondJS development environment.

// Img

The BeyondJS engine has an optimized cache that stores the bundled code to provide an instant response, which is invalidated if the bundle source code is changed, automatically generating a new compilation of the bundle.

Let's see the use of dev server according to the execution platform.

<Subtitle>Web, Android, iOS</Subtitle>

On the web, Android, and Ios platforms, the dev server not only serves bundles but additionally returns the index.html when the requested URL does not find a resource (bundle or static file).

<Subtitle>Deno</Subtitle>

Deno supports HTTP ES imports natively and stably.
BeyondJS generates the import maps to resolve the project's bundles. Thus, when a bundle registered in the project is required, Deno will load it pointing to the dev server.
You can work with BeyondJS and Deno to build a comprehensive application but also to create library projects that contain modules that you can consume from any other application.
BeyondJS supports the notion of cross-cutting bundles such as "start". The start bundles are coded in the modules, and their execution occurs at the start of the application.
If you are building a complete application in DENO, you would typically load the "start" bundle. **More info about bundle start and transversal bundles.**

<Subtitle>NodeJS</Subtitle>

BeyondJS aims to provide a universal typescript development environment.
Unlike Deno, which stably supports HTTP imports since its inception, NodeJS implements it in recent versions and is still in an experimental phase.

<ELink to="https://nodejs.org/api/esm.html#https-and-http-imports">
    https://nodejs.org/api/esm.html#https-and-http-imports
</ELink>

To provide a homogeneous experience, BeyondJS offers an execution environment (**BEE:** Beyond Execution Environment) specifically designed to be used in development (not in production) from NodeJS, in charge of allowing you to run an application by consuming the bundles from the HTTP server and providing HMR support.
This way, you can run an application in NodeJS processing bundles on demand, reducing the time required for startup.
If not for the BEEs, you should compile the entire application so that NodeJS can synchronously request for the bundles.

<Subtitle>Dockers containers</Subtitle>

Due to the design of the bundle consumption over HTTP, running an application in a docker container is as simple as running it on your local PC.

<Subtitle>Electron</Subtitle>

Electron applications feature two runtime environments, the browser for the UI view and a NodeJS instance which communicate with each other.
With BeyondJS you can work on the same project in both environments.

Modules specifying the "web" platform will be available for the view, and those specifying that the "node" platform will be available for that environment. This allows you to structure your application in an orderly way.
The NodeJS environment of an Electron application must run through a BEE to consume on demand and with HMR support bundles served by the dev server.

<Subtitle>Configuration</Subtitle>

BeyondJS evaluates the directory where it is being executed to identify the existing project(s) by validating if a `beyond.json` file exists.

The `beyond.json` file can be edited manually or through the dashboard which is available by default at <ELink to="https://workspace.beyondjs.com/">https://workspace.beyondjs.com/</ELink>

The structure of the `beyond.json` is as follows:

<Code>
    {`
"applications": "projects.json",
  "bundles": {},
  "libraries": []
`}
</Code>

**Propiedades**

-   applications <Link to="/aoc">AOC:</Link> Receive an array with the list of projects or applications configured so that BeyondJS can read and launch them. This file is managed by BeyondJS if the dashboard is being used.
-   bundles object: Allows you to configure the inclusion of bundles created by the developer.
-   libraries <Link to="/aoc">AOC:</Link> BeyondJS libraries configuration arrangement to use.

<Subtitle>Why Modular + Universal?</Subtitle>

Deno, NodeJS, Chrome, Edge, webview, are all based on the same Javascript technology. Same engine, but not the same coding techniques.

Package consumption in NodeJS is based on NPM and node_modules folder, Deno directly consumes dependencies as HTTP imports.
Modern browsers also have the ability to consume ES modules, but if you program for the web, unlike when you program for NodeJS or Deno, you will probably be using a bundler like webpack, parcel, rollup, esbuild, etc.

You can also use bundlers to program in Deno or NodeJS, which is becoming popular due to Isomorphism.

Currently, ES modules are available, which is a recent development, and simplifies the scenario considerably. Both the browser, NodeJS, and Deno can load ES modules natively.
